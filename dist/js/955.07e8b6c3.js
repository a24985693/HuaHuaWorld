"use strict";(self["webpackChunkfinal_hw"]=self["webpackChunkfinal_hw"]||[]).push([[955],{5955:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var d=a(641),s=a(33);const r={class:"table-responsive"},l={class:"table text-nowrap"},o=(0,d.Lk)("thead",null,[(0,d.Lk)("tr",null,[(0,d.Lk)("th",{scope:"col"},"訂單編號"),(0,d.Lk)("th",{scope:"col"},"Email"),(0,d.Lk)("th",{scope:"col"},"購買項目"),(0,d.Lk)("th",{scope:"col"},"應付金額"),(0,d.Lk)("th",{scope:"col"},"是否付款"),(0,d.Lk)("th",{scope:"col"},"編輯")])],-1),i={scope:"row"},n={class:"list-unstyled"},c={key:0,class:"text-success"},p={key:1,class:"text-muted"},u={class:"btn-group"},m=["onClick"],h=["onClick"];function b(e,t,a,b,k,L){const g=(0,d.g2)("Loading"),O=(0,d.g2)("OrderModal"),v=(0,d.g2)("DelOrderModal"),y=(0,d.g2)("Pagination");return(0,d.uX)(),(0,d.CE)(d.FK,null,[(0,d.bF)(g,{active:k.isLoading},null,8,["active"]),(0,d.Lk)("div",r,[(0,d.Lk)("table",l,[o,(0,d.Lk)("tbody",null,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(k.orders,(t=>((0,d.uX)(),(0,d.CE)("tr",{key:t.id},[(0,d.Lk)("td",i,(0,s.v_)(t.create_at),1),(0,d.Lk)("td",null,(0,s.v_)(t.user.email),1),(0,d.Lk)("td",null,[(0,d.Lk)("ul",n,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(t.products,((e,t)=>((0,d.uX)(),(0,d.CE)("li",{key:t}," 品名:"+(0,s.v_)(e.product.title)+" 數量:"+(0,s.v_)(e.product.num),1)))),128))])]),(0,d.Lk)("td",null,(0,s.v_)(e.$filters.currency(t.total)),1),(0,d.Lk)("td",null,[t.is_paid?((0,d.uX)(),(0,d.CE)("span",c,"已付款")):((0,d.uX)(),(0,d.CE)("span",p,"未付款"))]),(0,d.Lk)("td",null,[(0,d.Lk)("div",u,[(0,d.Lk)("button",{class:"btn btn-outline-gray btn-sm",type:"button",onClick:e=>L.openModal(t)},"編輯",8,m),(0,d.Lk)("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:e=>L.openDelModal(t)},"刪除",8,h)])])])))),128))])])]),(0,d.bF)(O,{ref:"OrderModal",order:k.tempOrder,onUpdateOrder:L.updateOrder},null,8,["order","onUpdateOrder"]),(0,d.bF)(v,{ref:"DelOrderModal",order:k.tempOrder,onDeleteOrder:L.deleteOrder},null,8,["order","onDeleteOrder"]),(0,d.bF)(y,{pagination:k.pagination,onUpdatePage:L.getOrders},null,8,["pagination","onUpdatePage"])],64)}var k=a(3751);const L={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},g={class:"modal-dialog",role:"document"},O={class:"modal-content border-0"},v=(0,d.Lk)("div",{class:"modal-header bg-dark text-white"},[(0,d.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"編輯訂單"),(0,d.Lk)("button",{type:"button",class:"btn-close text-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={class:"modal-body"},f={class:"modal-body"},M={class:"mb-3"},x=(0,d.Lk)("label",{for:"total"},"請輸入金額",-1),C={class:"mb-3"},_=(0,d.Lk)("label",{for:"is_paid"},"是否付款",-1),w={class:"modal-footer"},$=(0,d.Lk)("button",{type:"button",class:"btn btn-gray","data-bs-dismiss":"modal"},"取消",-1);function E(e,t,a,s,r,l){return(0,d.uX)(),(0,d.CE)("div",L,[(0,d.Lk)("div",g,[(0,d.Lk)("div",O,[v,(0,d.Lk)("div",y,[(0,d.Lk)("div",f,[(0,d.Lk)("div",M,[x,(0,d.bo)((0,d.Lk)("input",{type:"num",class:"form-control",id:"total","onUpdate:modelValue":t[0]||(t[0]=e=>r.tempOrder.total=e)},null,512),[[k.Jo,r.tempOrder.total]])]),(0,d.Lk)("div",C,[(0,d.bo)((0,d.Lk)("input",{type:"checkbox",class:"form-check-input",id:"is_paid","onUpdate:modelValue":t[1]||(t[1]=e=>r.tempOrder.is_paid=e)},null,512),[[k.lH,r.tempOrder.is_paid]]),_])])]),(0,d.Lk)("div",w,[$,(0,d.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=t=>e.$emit("update-order",r.tempOrder))},"確認")])])])],512)}var D=a(3286),X={watch:{order(){this.tempOrder=this.order}},props:{order:{}},data(){return{tempOrder:{}}},mixins:[D.A]},F=a(6262);const A=(0,F.A)(X,[["render",E]]);var U=A;const P={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},j={class:"modal-dialog"},K={class:"modal-content"},I=(0,d.Lk)("div",{class:"modal-header bg-dark"},[(0,d.Lk)("h5",{class:"modal-title text-white",id:"exampleModalLabel"},"刪除訂單"),(0,d.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),V={class:"modal-body"},H={class:"modal-footer"},J=(0,d.Lk)("button",{type:"button",class:"btn btn-gray","data-bs-dismiss":"modal"},"取消",-1);function q(e,t,a,r,l,o){return(0,d.uX)(),(0,d.CE)("div",P,[(0,d.Lk)("div",j,[(0,d.Lk)("div",K,[I,(0,d.Lk)("div",V," 確定要刪除 "+(0,s.v_)(l.tempOrder.create_at)+" 嗎? ",1),(0,d.Lk)("div",H,[J,(0,d.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("delete-order"))},"刪除")])])])],512)}var z={props:{order:{}},watch:{order(){this.tempOrder=this.order}},data(){return{tempOrder:{}}},mixins:[D.A]};const B=(0,F.A)(z,[["render",q]]);var G=B,N=a(4977),Q={components:{OrderModal:U,DelOrderModal:G,Pagination:N.A},data(){return{orders:{},tempOrder:{},pagination:{},isLoading:!1}},inject:["emitter"],methods:{getOrders(e=1){const t=`https://vue3-course-api.hexschool.io/api/cms67/admin/orders?page=${e}`;this.$http.get(t).then((e=>{this.orders=e.data.orders,this.pagination=e.data.pagination}))},openModal(e){this.tempOrder={...e},this.$refs.OrderModal.showModal()},updateOrder(e){this.isLoading=!0,this.tempOrder=e;const t=`https://vue3-course-api.hexschool.io/api/cms67/admin/order/${e.id}`;this.$http.put(t,{data:this.tempOrder}).then((e=>{this.isLoading=!1,this.$refs.OrderModal.hideModal();const t="更新成功";e.data.success?(this.getOrders(),this.emitter.emit("push-message",{style:"success",title:t})):this.emitter.emit("push-message",{style:"danger",title:t,content:e.data.message.join("、")})}))},openDelModal(e){this.tempOrder={...e},this.$refs.DelOrderModal.showModal()},deleteOrder(){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/cms67/admin/order/${this.tempOrder.id}`;this.$http.delete(e).then((e=>{this.isLoading=!1,this.$refs.DelOrderModal.hideModal(),this.getOrders(),e.data.success?this.emitter.emit("delete-message",{style:"success",title:"刪除成功"}):this.emitter.emit("delete-message",{style:"danger",title:"刪除失敗",content:e.data.message.join("、")})}))}},created(){this.getOrders()}};const R=(0,F.A)(Q,[["render",b]]);var S=R}}]);
//# sourceMappingURL=955.07e8b6c3.js.map
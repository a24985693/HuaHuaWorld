"use strict";(self["webpackChunkfinal_hw"]=self["webpackChunkfinal_hw"]||[]).push([[865],{6453:function(t,e){e.A={inject:["emitter"],created(){this.emitter.emit("get-path",{fullPath:this.$route.fullPath})}}},7865:function(t,e,l){l.r(e),l.d(e,{default:function(){return B}});var s=l(641),o=l(3751),r=l(33);const c={class:"container"},n={class:"row justify-content-center mb-5"},d={class:"col-12 col-md-8"},a=(0,s.Lk)("h4",{class:"mb-4"},"訂單查詢",-1),i={class:"input-group"},u={key:0,class:"row justify-content-center g-5"},k={class:"col-12 col-xl-5"},L={class:"table align-middle"},p=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"},"品名"),(0,s.Lk)("th",{scope:"col",class:"text-end"},"數量"),(0,s.Lk)("th",{scope:"col",class:"text-end"},"單價")])],-1),h={class:"row flex-column flex-md-row align-items-center"},m={class:"position-relative col w-100 w-xl-50 pt-100 pt-xl-50"},v=["src"],f={class:"col m-0 text-center"},x={class:"text-end"},b={class:"text-end"},g={key:0},y=(0,s.Lk)("td",{colspan:"2",class:"text-end text-success"},"已使用優惠券",-1),C={class:"text-success text-end"},_=(0,s.Lk)("td",{colspan:"2",class:"text-end"},"總計",-1),w={class:"text-end"},E={class:"col-12 col-xl-5"},$={class:"table mb-4"},O=(0,s.Lk)("th",null,"訂單編號",-1),X=(0,s.Lk)("th",null,"Email",-1),I=(0,s.Lk)("th",null,"收件人姓名",-1),j=(0,s.Lk)("th",null,"收件人電話",-1),A=(0,s.Lk)("th",null,"收件人地址",-1),F=(0,s.Lk)("th",null,"付款狀態",-1),Q={key:0,class:"text-danger"},K={key:1,class:"text-success"},N={key:0,class:"row flex-column flex-md-row"},P=(0,s.Lk)("div",{class:"col col-md-7"},[(0,s.Lk)("i",{class:"fa-solid fa-triangle-exclamation me-2"}),(0,s.Lk)("span",{class:"fw-semibold"},"訂單尚未完成!"),(0,s.Lk)("p",null,"確認訂單內容後，點擊付款即完成訂單!")],-1),T={class:"col col-md-5 text-end"};function U(t,e,l,U,q,J){const V=(0,s.g2)("Loading");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(V,{active:q.isLoading},null,8,["active"]),(0,s.Lk)("div",c,[(0,s.Lk)("div",n,[(0,s.Lk)("div",d,[a,(0,s.Lk)("div",i,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",placeholder:"請輸入訂單號碼","onUpdate:modelValue":e[0]||(e[0]=t=>q.orderId=t)},null,512),[[o.Jo,q.orderId]]),(0,s.Lk)("button",{class:"btn btn-secondary",onClick:e[1]||(e[1]=(...t)=>J.getOrder&&J.getOrder(...t))}," 查詢 ")])])]),q.order.id?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("div",k,[(0,s.Lk)("table",L,[p,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(q.order.products,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",h,[(0,s.Lk)("div",m,[(0,s.Lk)("img",{src:e.product.imageUrl,alt:"",class:"object-fit-cover position-absolute top-0 bottom-0 start-0 end-0 w-100 h-100"},null,8,v)]),(0,s.Lk)("p",f,(0,r.v_)(e.product.title),1)]),(0,s.Lk)("td",x,(0,r.v_)(e.qty)+"/"+(0,r.v_)(e.product.unit),1),(0,s.Lk)("td",b,"NT$"+(0,r.v_)(t.$filters.currency(e.final_total)),1)])))),128))]),(0,s.Lk)("tfoot",null,[q.couponCode?((0,s.uX)(),(0,s.CE)("tr",g,[y,(0,s.Lk)("td",C,(0,r.v_)(q.couponCode),1)])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,[_,(0,s.Lk)("td",w,"NT$"+(0,r.v_)(t.$filters.currency(q.order.total)),1)])])])]),(0,s.Lk)("div",E,[(0,s.Lk)("table",$,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[O,(0,s.Lk)("td",null,(0,r.v_)(q.order.id),1)]),(0,s.Lk)("tr",null,[X,(0,s.Lk)("td",null,(0,r.v_)(q.order.user.email),1)]),(0,s.Lk)("tr",null,[I,(0,s.Lk)("td",null,(0,r.v_)(q.order.user.name),1)]),(0,s.Lk)("tr",null,[j,(0,s.Lk)("td",null,(0,r.v_)(q.order.user.tel),1)]),(0,s.Lk)("tr",null,[A,(0,s.Lk)("td",null,(0,r.v_)(q.order.user.address),1)]),(0,s.Lk)("tr",null,[F,q.order.is_paid?((0,s.uX)(),(0,s.CE)("td",K,"付款完成")):((0,s.uX)(),(0,s.CE)("td",Q,"尚未付款"))])])]),q.order.is_paid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",N,[P,(0,s.Lk)("div",T,[(0,s.Lk)("button",{class:"btn btn-danger",onClick:e[2]||(e[2]=(...t)=>J.payOrder&&J.payOrder(...t))}," 確認付款 ")])]))])])):(0,s.Q3)("",!0)])],64)}var q=l(6453),J={data(){return{orderId:"",order:{user:{}},couponCode:"",isLoading:!1}},mixins:[q.A],methods:{getOrder(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/cms67/order/${this.orderId}`;this.$http.get(t).then((t=>{this.isLoading=!1,this.order=t.data.order;const e=Object.keys(t.data.order.products)[0],l=t.data.order.products[e];l.coupon&&(this.couponCode=l.coupon.code)}))},payOrder(){this.isLoading=!0;const t=this.orderId.trim(),e=`https://vue3-course-api.hexschool.io/api/cms67/pay/${t}`;this.$http.post(e).then((t=>{if(this.isLoading=!1,t.data.success){this.getOrder();const t="付款成功";this.emitter.emit("push-message",{style:"success",title:t,content:"已完成付款"})}}))}}},V=l(6262);const z=(0,V.A)(J,[["render",U]]);var B=z}}]);
//# sourceMappingURL=865.d576e2d1.js.map
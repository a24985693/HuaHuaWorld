"use strict";(self["webpackChunkfinal_hw"]=self["webpackChunkfinal_hw"]||[]).push([[589],{6453:function(t,e){e.A={inject:["emitter"],created(){this.emitter.emit("get-path",{fullPath:this.$route.fullPath})}}},1589:function(t,e,s){s.r(e),s.d(e,{default:function(){return rt}});var l=s(641),i=s(33),o=s(3751);const a={class:"container cart"},c={class:"row align-items-center d-flex flex-column g-4"},n=(0,l.Fv)('<div class="col-12 col-md-8 col-xl-7"><div class="row gx-3 text-center"><div class="col-4 border py-3 bg-info"><h5>step1</h5><p>確認訂單</p></div><div class="col-4 border py-3"><h5>step2</h5><p>填寫資料</p></div><div class="col-4 border py-3"><h5>step3</h5><p>付款</p></div></div></div>',1),r={class:"col-12 col-md-8 col-xl-7"},d=(0,l.Lk)("h4",{class:"mb-3"},"購物車清單",-1),u={class:"clearfix mx-2"},p={class:"col-4 col-md-3"},h={class:"product-img"},k=["src","onClick"],L={class:"delete-icon"},f=["onClick"],m=(0,l.Lk)("i",{class:"fa-solid fa-xmark text-gray fs-3"},null,-1),g=[m],b={key:0,class:"use-coupon"},v=(0,l.Lk)("p",{class:"text-success"},"已套用優惠",-1),x=[v],y={class:"col-6 col-md-9 product-content"},C={class:"row flex-column align-items-center flex-md-row list-unstyled gy-2"},w={class:"col col-md-5 col-xl-7 product-title"},$={class:"mb-0 fs-6 fw-semibold"},_={class:"d-none d-xl-flex fs-14"},j={class:"col col-md-7 col-xl-5 list-unstyled d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between"},q={class:"updateNum d-flex align-items-center justify-content-center mb-2 mb-md-0"},P=["onClick","disabled"],E=(0,l.Lk)("i",{class:"fa-solid fa-minus fs-5"},null,-1),X=[E],F=["onUpdate:modelValue","onChange"],A=["onClick","disabled"],Q=(0,l.Lk)("i",{class:"fa-solid fa-plus fs-5"},null,-1),W=[Q],D={class:"product-price text-end"},I={class:"row justify-content-between mb-2"},K={class:"col"},U={class:"col text-end"},N={class:"text-pink fw-bold"},V={class:"row justify-content-end mb-3"},J={class:"col col-md-6 col-xl-5 list-unstyled"},z={class:"text-end d-flex justify-content-between mb-1"},O=(0,l.Lk)("p",null,"總計",-1),T={key:0,class:"text-end d-flex justify-content-between text-muted mb-1 border-bottom border-dark fs-14"},B=(0,l.Lk)("p",null,"已套用優惠券",-1),G={key:1,class:"text-end d-flex justify-content-between mb-2"},H=(0,l.Lk)("p",null,"折扣價",-1),M={class:"input-group"},R={class:"row justify-content-between fs-5"},S={class:"col-6"},Y=(0,l.Lk)("i",{class:"fa-solid fa-angle-left"},null,-1),Z={class:"col text-end"},tt=(0,l.Lk)("i",{class:"fa-solid fa-angle-right"},null,-1),et={key:1,class:"p-5 text-center"},st=(0,l.Lk)("i",{class:"fa-solid fa-cart-shopping text-gray mb-5",style:{"font-size":"120px"}},null,-1),lt=(0,l.Lk)("h5",{class:"mb-3"},"購物車目前沒有商品",-1);function it(t,e,s,m,v,E){const Q=(0,l.g2)("Loading"),it=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(Q,{active:v.isLoading},null,8,["active"]),(0,l.Lk)("div",a,[(0,l.Lk)("div",c,[n,(0,l.Lk)("div",r,[d,0!==v.cartLength?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",u,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(v.cart.carts,(e=>((0,l.uX)(),(0,l.CE)("ul",{key:e.id,class:"row bg-white list-unstyled align-items-center py-3 position-relative"},[(0,l.Lk)("li",p,[(0,l.Lk)("div",h,[(0,l.Lk)("img",{src:e.product.imageUrl,alt:"",class:"object-fit-cover",onClick:t=>E.getProduct(e.product.id)},null,8,k)]),(0,l.Lk)("div",L,[(0,l.Lk)("button",{class:"btn",onClick:t=>E.deleteCartItem(e)},g,8,f)]),v.cart.final_total!==v.cart.total?((0,l.uX)(),(0,l.CE)("div",b,x)):(0,l.Q3)("",!0)]),(0,l.Lk)("li",y,[(0,l.Lk)("ul",C,[(0,l.Lk)("li",w,[(0,l.Lk)("p",$,(0,i.v_)(e.product.title),1),(0,l.Lk)("p",_,(0,i.v_)(e.product.description),1)]),(0,l.Lk)("ul",j,[(0,l.Lk)("li",q,[(0,l.Lk)("button",{onClick:(0,o.D$)((t=>E.updateCart(e,e.qty-1)),["prevent"]),disabled:e.qty<=1,class:"btn"},X,8,P),(0,l.bo)((0,l.Lk)("input",{type:"number",class:"shadow-none","onUpdate:modelValue":t=>e.qty=t,min:"1",max:"100",onChange:t=>E.updateCart(e,e.qty)},null,40,F),[[o.Jo,e.qty]]),(0,l.Lk)("button",{onClick:(0,o.D$)((t=>{E.updateCart(e,e.qty+1)}),["prevent"]),disabled:e.qty>=20,class:"btn"},W,8,A)]),(0,l.Lk)("li",D," NT$"+(0,i.v_)(t.$filters.currency(e.total)),1)])])])])))),128))]),(0,l.Lk)("div",I,[(0,l.Lk)("div",K,[(0,l.Lk)("button",{class:"btn btn-sm btn-outline-gray",onClick:e[0]||(e[0]=(...t)=>E.deleteAll&&E.deleteAll(...t))}," 清空購物車 ")]),(0,l.Lk)("div",U,[(0,l.Lk)("p",null,[(0,l.eW)("共 "),(0,l.Lk)("span",N,(0,i.v_)(v.cartLength),1),(0,l.eW)(" 件商品")])])]),(0,l.Lk)("div",V,[(0,l.Lk)("ul",J,[(0,l.Lk)("li",z,[O,(0,l.Lk)("p",null,(0,i.v_)(t.$filters.currency(v.cart.total)),1)]),v.cart.final_total!==v.cart.total?((0,l.uX)(),(0,l.CE)("li",T,[B,(0,l.Lk)("p",null,(0,i.v_)(v.cart.carts[0].coupon.code),1)])):(0,l.Q3)("",!0),v.cart.final_total!==v.cart.total?((0,l.uX)(),(0,l.CE)("li",G,[H,(0,l.Lk)("p",null,(0,i.v_)(t.$filters.currency(v.cart.final_total)),1)])):(0,l.Q3)("",!0),(0,l.Lk)("li",null,[(0,l.Lk)("div",M,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[1]||(e[1]=t=>v.couponCode=t)},null,512),[[o.Jo,v.couponCode]]),(0,l.Lk)("button",{class:"btn btn-secondary",onClick:e[2]||(e[2]=(...t)=>E.addCouponCode&&E.addCouponCode(...t))},"套用")])])])]),(0,l.Lk)("div",R,[(0,l.Lk)("div",S,[(0,l.Lk)("a",{href:"#",onClick:e[3]||(e[3]=(0,o.D$)(((...t)=>E.returnPage&&E.returnPage(...t)),["prevent"])),onKeydown:e[4]||(e[4]=(0,o.D$)(((...t)=>E.returnPage&&E.returnPage(...t)),["prevent"])),class:"text-decoration-none"},[Y,(0,l.eW)(" 回到上頁 ")],32)]),(0,l.Lk)("div",Z,[(0,l.bF)(it,{to:"/user/information",class:"text-decoration-none fw-bold text-pink"},{default:(0,l.k6)((()=>[(0,l.eW)(" 前往結帳 "),tt])),_:1})])])],64)):(0,l.Q3)("",!0),0===v.cartLength?((0,l.uX)(),(0,l.CE)("div",et,[st,lt,(0,l.bF)(it,{to:"/user/productsList",class:"fw-semibold text-pink"},{default:(0,l.k6)((()=>[(0,l.eW)(" 繼續購物 ")])),_:1})])):(0,l.Q3)("",!0)])])])],64)}s(4114);var ot=s(6453),at={data(){return{cart:{},cartLength:"",cartNum:"",couponCode:"",isLoading:!1}},mixins:[ot.A],methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/cms67/cart";this.$http.get(t).then((t=>{this.cart=t.data.data,this.cartLength=this.cart.carts.length,this.isLoading=!1,this.emitter.emit("get-cart",{cartLength:this.cartLength})}))},updateCart(t,e){if(this.isLoading=!0,e>20)this.product.qty=20,this.isLoading=!1;else if(e<1)this.product.qty=1,this.isLoading=!1;else{const s=`https://vue3-course-api.hexschool.io/api/cms67/cart/${t.id}`,l={product_id:t.product_id,qty:e};this.$http.put(s,{data:l}).then((()=>{this.getCart(),this.isLoading=!1}))}},deleteCartItem(t){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/cms67/cart/${t.id}`;this.$http.delete(e).then((()=>{this.getCart(),this.isLoading=!1;const e="已移除品項";this.emitter.emit("push-message",{style:"danger",title:e,content:`已將${t.product.title}移除`})}))},deleteAll(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/cms67/carts";this.$http.delete(t).then((()=>{this.getCart(),this.isLoading=!1;const t="已移除全部品項";this.emitter.emit("push-message",{style:"danger",title:t,content:"已將全部品項移除"})}))},addCouponCode(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/cms67/coupon",e={code:this.couponCode};this.$http.post(t,{data:e}).then((()=>{this.getCart(),this.couponCode="",this.isLoading=!1}))},createOrder(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/cms67/order";this.$http.post(t,{data:this.form}).then((t=>{this.isLoading=!1,this.$router.push(`/user/checkout/${t.data.orderId}`)}))},returnPage(){this.$router.go(-1)},getProduct(t){this.$router.push(`/user/product/${t}`)}},created(){this.getCart()}},ct=s(6262);const nt=(0,ct.A)(at,[["render",it]]);var rt=nt}}]);
//# sourceMappingURL=589.bc463485.js.map
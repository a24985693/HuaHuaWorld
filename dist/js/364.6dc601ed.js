"use strict";(self["webpackChunkfinal_hw"]=self["webpackChunkfinal_hw"]||[]).push([[364],{6453:function(t,e){e.A={inject:["emitter"],created(){this.emitter.emit("get-path",{fullPath:this.$route.fullPath})}}},2364:function(t,e,l){l.r(e),l.d(e,{default:function(){return R}});var s=l(641),o=l(3751),r=l(33);const c={class:"container"},n={class:"row justify-content-center mb-5"},i={class:"col-12 col-md-8"},d=(0,s.Lk)("h4",{class:"mb-4"},"訂單查詢",-1),a={class:"input-group"},u={key:0,class:"row justify-content-center g-5"},k={class:"col-12 col-md-6 col-xl-5"},L=(0,s.Lk)("h4",{class:"mb-3"},"訂單明細",-1),h={class:"col-5 col-xl-3"},p={class:"position-relative w-100 pt-100"},m=["src"],b={class:"col-7 col-xl-9"},g={class:"row flex-column flex-xl-row justify-content-md-between"},v={class:"col-xl-6 fw-bold mb-xl-0"},x={class:"col-xl-2 mb-xl-0"},f={class:"col-xl-4 ps-auto mb-0 text-xl-end"},y={key:0,class:"list-unstyled row bg-white pt-3"},w=(0,s.Lk)("li",{class:"col text-success text-end"},"已使用優惠券",-1),C={class:"col text-success text-end"},_={class:"list-unstyled row bg-white py-3"},E=(0,s.Lk)("li",{class:"col text-end"},"總計",-1),X={class:"col text-end"},$={class:"col-12 col-md-6 col-xl-5"},O=(0,s.Lk)("h4",{class:"mb-3"},"寄貨資料",-1),j={class:"table mb-4"},I=(0,s.Lk)("th",null,"訂單編號",-1),A=(0,s.Lk)("th",null,"Email",-1),F=(0,s.Lk)("th",null,"收件人姓名",-1),Q=(0,s.Lk)("th",null,"收件人電話",-1),K=(0,s.Lk)("th",null,"收件人地址",-1),N=(0,s.Lk)("th",null,"付款狀態",-1),P={key:0,class:"text-danger"},T={key:1,class:"text-success"},U={key:0,class:"row flex-column flex-md-row"},q=(0,s.Lk)("div",{class:"col col-md-7"},[(0,s.Lk)("i",{class:"fa-solid fa-triangle-exclamation me-2"}),(0,s.Lk)("span",{class:"fw-semibold"},"訂單尚未完成!"),(0,s.Lk)("p",null,"確認訂單內容後，點擊付款即完成訂單!")],-1),J={class:"col col-md-5 text-end"},V={key:1},z={class:"h5 text-center text-danger"};function B(t,e,l,B,D,G){const H=(0,s.g2)("Loading");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(H,{active:D.isLoading},null,8,["active"]),(0,s.Lk)("div",c,[(0,s.Lk)("div",n,[(0,s.Lk)("div",i,[d,(0,s.Lk)("div",a,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",placeholder:"請輸入訂單號碼","onUpdate:modelValue":e[0]||(e[0]=t=>D.orderId=t)},null,512),[[o.Jo,D.orderId]]),(0,s.Lk)("button",{class:"btn btn-secondary",type:"button",onClick:e[1]||(e[1]=(...t)=>G.getOrder&&G.getOrder(...t))}," 查詢 ")])])]),null!==D.order&&D.order.id?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("div",k,[L,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(D.order.products,(e=>((0,s.uX)(),(0,s.CE)("ul",{key:e.id,class:"list-unstyled row border-bottom mb-0 py-3 align-items-center bg-white"},[(0,s.Lk)("li",h,[(0,s.Lk)("div",p,[(0,s.Lk)("img",{src:e.product.imageUrl,alt:"商品圖片",class:"object-fit-cover position-absolute top-0 bottom-0 start-0 end-0 w-100 h-100"},null,8,m)])]),(0,s.Lk)("li",b,[(0,s.Lk)("div",g,[(0,s.Lk)("p",v,(0,r.v_)(e.product.title),1),(0,s.Lk)("p",x,"x"+(0,r.v_)(e.qty),1),(0,s.Lk)("p",f," NT$"+(0,r.v_)(t.$filters.currency(e.final_total)),1)])])])))),128)),D.couponCode?((0,s.uX)(),(0,s.CE)("ul",y,[w,(0,s.Lk)("li",C,(0,r.v_)(D.couponCode),1)])):(0,s.Q3)("",!0),(0,s.Lk)("ul",_,[E,(0,s.Lk)("li",X,"NT$"+(0,r.v_)(t.$filters.currency(D.order.total)),1)])]),(0,s.Lk)("div",$,[O,(0,s.Lk)("table",j,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[I,(0,s.Lk)("td",null,(0,r.v_)(D.order.id),1)]),(0,s.Lk)("tr",null,[A,(0,s.Lk)("td",null,(0,r.v_)(D.order.user.email),1)]),(0,s.Lk)("tr",null,[F,(0,s.Lk)("td",null,(0,r.v_)(D.order.user.name),1)]),(0,s.Lk)("tr",null,[Q,(0,s.Lk)("td",null,(0,r.v_)(D.order.user.tel),1)]),(0,s.Lk)("tr",null,[K,(0,s.Lk)("td",null,(0,r.v_)(D.order.user.address),1)]),(0,s.Lk)("tr",null,[N,D.order.is_paid?((0,s.uX)(),(0,s.CE)("td",T,"付款完成")):((0,s.uX)(),(0,s.CE)("td",P,"尚未付款"))])])]),D.order.is_paid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",U,[q,(0,s.Lk)("div",J,[(0,s.Lk)("button",{class:"btn btn-danger",type:"button",onClick:e[2]||(e[2]=(...t)=>G.payOrder&&G.payOrder(...t))}," 確認付款 ")])]))])])):D.warning?((0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("p",z,(0,r.v_)(D.warning),1)])):(0,s.Q3)("",!0)])],64)}var D=l(6453),G={data(){return{orderId:"",order:{user:{}},couponCode:"",isLoading:!1,warning:""}},mixins:[D.A],methods:{getOrder(){this.order={},this.isLoading=!0;const t=this.orderId.trim();if(t){const e=`https://vue3-course-api.hexschool.io/api/cms67/order/${t}`;this.$http.get(e).then((t=>{if(this.isLoading=!1,t.data.order){this.order=t.data.order;const e=Object.keys(t.data.order.products)[0],l=t.data.order.products[e];l.coupon&&(this.couponCode=l.coupon.code)}else this.order=t.data.order,this.warning="訂單號碼輸入錯誤，請重新輸入"}))}else this.isLoading=!1,this.warning="訂單號碼不可為空，請輸入訂單號碼"},payOrder(){this.isLoading=!0;const t=this.orderId.trim(),e=`https://vue3-course-api.hexschool.io/api/cms67/pay/${t}`;this.$http.post(e).then((t=>{if(this.isLoading=!1,t.data.success){this.getOrder();const t="付款成功";this.emitter.emit("push-message",{style:"success",title:t,content:"已完成付款"})}}))}}},H=l(6262);const M=(0,H.A)(G,[["render",B]]);var R=M}}]);
//# sourceMappingURL=364.6dc601ed.js.map
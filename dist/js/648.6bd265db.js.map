{"version":3,"file":"js/648.6bd265db.js","mappings":"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","sources":["webpack://final-hw/./src/mixins/fullpathMixin.js","webpack://final-hw/./src/mixins/getCartMixin.js","webpack://final-hw/./src/views/UserCheckout.vue","webpack://final-hw/./src/views/UserCheckout.vue?0c02"],"sourcesContent":["export default {\r\n  inject: ['emitter'],\r\n  created() {\r\n    this.emitter.emit('get-path', {\r\n      fullPath: this.$route.fullPath,\r\n    });\r\n  },\r\n};\r\n","export default {\r\n  data() {\r\n    return {\r\n      cart: {},\r\n      cartLength: '',\r\n      cartNum: '',\r\n      productClicked: '',\r\n      btnLoading: '',\r\n    };\r\n  },\r\n  methods: {\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          this.cart = res.data.data;\r\n          // console.log(this.cart);\r\n          this.cartLength = this.cart.carts.length;\r\n          this.emitter.emit('get-cart', {\r\n            cartLength: this.cartLength,\r\n          });\r\n        });\r\n    },\r\n    addtoCart(item, quantity = 1) {\r\n      this.productClicked = this.cart.carts.find((i) => i.product_id === item.id);\r\n      this.btnLoading = item.id;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      const cart = {\r\n        product_id: item.id,\r\n        qty: quantity,\r\n      };\r\n      this.$http.post(url, { data: cart })\r\n        .then((res) => {\r\n          const { title } = res.data.data.product;\r\n          this.btnLoading = '';\r\n          this.getCart();\r\n          if (res.data.data.qty > 20) {\r\n            const messageTitle = '已加入到最大數量';\r\n            this.emitter.emit('push-message', {\r\n              style: 'warning',\r\n              title: messageTitle,\r\n              content: `購物車內目前已有20件${title}`,\r\n            });\r\n            this.updateCart();\r\n          } else {\r\n            const messageTitle = '加入成功';\r\n            this.emitter.emit('push-message', {\r\n              style: 'success',\r\n              title: messageTitle,\r\n              content: `已將${title}加入購物車`,\r\n            });\r\n          }\r\n        });\r\n    },\r\n    updateCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${this.productClicked.id}`;\r\n      const cart = {\r\n        product_id: this.productClicked.product_id,\r\n        qty: 20,\r\n      };\r\n      this.$http.put(url, { data: cart })\r\n        .then(() => {\r\n          this.getCart();\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    this.getCart();\r\n  },\r\n};\r\n","<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"container\">\r\n    <div class=\"row align-items-center flex-column mb-5\">\r\n      <div class=\"col col-md-8 col-xl-7\">\r\n        <div class=\"row gx-3 text-center\">\r\n          <div class=\"col-4 border py-3\">\r\n            <h5>step1</h5>\r\n            <p class=\"m-0\">確認訂單</p>\r\n          </div>\r\n          <div class=\"col-4 border py-3\">\r\n            <h5>step2</h5>\r\n            <p class=\"m-0\">填寫資料</p>\r\n          </div>\r\n          <div class=\"col-4 border py-3 bg-info\">\r\n            <h5>step3</h5>\r\n            <p class=\"m-0\">付款</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row justify-content-center gy-5 gx-md-5\">\r\n      <div class=\"col-12 col-md-6 col-xl-5\">\r\n        <h4 class=\"mb-3\">訂單明細</h4>\r\n        <ul v-for=\"item in order.products\" :key=\"item.id\"\r\n        class=\"list-unstyled row border-bottom mb-0 py-3 align-items-center\r\n        bg-white\">\r\n          <li class=\"col-5 col-xl-3\">\r\n            <div class=\"position-relative w-100 pt-100\">\r\n              <img :src=\"item.product.imageUrl\" alt=\"商品圖片\"\r\n              class=\"object-fit-cover position-absolute top-0\r\n              bottom-0 start-0 end-0 w-100 h-100\">\r\n            </div>\r\n          </li>\r\n          <li class=\"col-7 col-xl-9\">\r\n            <div class=\"row flex-column flex-xl-row\r\n            justify-content-md-between\">\r\n              <p class=\"col-xl-6 fw-bold mb-xl-0\">{{ item.product.title }}</p>\r\n              <p class=\"col-xl-2 mb-xl-0\">x{{ item.qty }}</p>\r\n              <p class=\"col-xl-4 ps-auto mb-0 text-xl-end\">\r\n                NT${{ $filters.currency(item.final_total) }}\r\n              </p>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n        <ul v-if=\"couponCode\" class=\"list-unstyled row bg-white pt-3\">\r\n          <li class=\"col text-success text-end\">已使用優惠券</li>\r\n          <li class=\"col text-success text-end\">{{ couponCode }}</li>\r\n        </ul>\r\n        <ul class=\"list-unstyled row bg-white py-3\">\r\n          <li class=\"col text-end\">總計</li>\r\n          <li class=\"col text-end\">NT${{ $filters.currency(order.total) }}</li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"col-12 col-md-6 col-xl-5\">\r\n        <h4 class=\"mb-3\">寄貨資料</h4>\r\n        <table class=\"table mb-4\">\r\n          <tbody>\r\n            <tr>\r\n              <th>訂單編號</th>\r\n              <td>{{ order.id }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>Email</th>\r\n              <td>{{ order.user.email }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>收件人姓名</th>\r\n              <td>{{ order.user.name }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>收件人電話</th>\r\n              <td>{{ order.user.tel }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>收件人地址</th>\r\n              <td>{{ order.user.address }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>付款狀態</th>\r\n              <td v-if=\"!order.is_paid\" class=\"text-danger\">尚未付款</td>\r\n              <td v-else class=\"text-success\">付款完成</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <div class=\"row flex-column flex-md-row\" v-if=\"!order.is_paid\">\r\n          <div class=\"col col-md-7\">\r\n            <i class=\"fa-solid fa-triangle-exclamation me-2\"></i>\r\n            <span class=\" fw-semibold\">訂單尚未完成!</span>\r\n            <p>確認訂單內容後，點擊付款即完成訂單!</p>\r\n          </div>\r\n          <div class=\"col col-md-5 text-end\">\r\n            <button class=\"btn btn-danger\" type=\"button\"\r\n            @click=\"payOrder\">\r\n              確認付款\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-12 col-xl-10 text-end\">\r\n        <router-link v-if=\"order.is_paid\" to=\"/\"\r\n          class=\"fw-semibold\">\r\n          回到首頁\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport fullpathMixin from '@/mixins/fullpathMixin';\r\nimport getCartMixin from '@/mixins/getCartMixin';\r\n\r\nexport default {\r\n  mixins: [fullpathMixin, getCartMixin],\r\n  data() {\r\n    return {\r\n      order: {\r\n        user: {},\r\n      },\r\n      couponCode: '',\r\n      isLoading: false,\r\n    };\r\n  },\r\n  methods: {\r\n    getOrder() {\r\n      this.isLoading = true;\r\n      const { orderId } = this.$route.params;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${orderId}`;\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          this.isLoading = false;\r\n          this.order = res.data.order;\r\n          const key = Object.keys(res.data.order.products)[0];\r\n          const productKey = res.data.order.products[key];\r\n          if (productKey.coupon) {\r\n            this.couponCode = productKey.coupon.code;\r\n          }\r\n        });\r\n    },\r\n    payOrder() {\r\n      this.isLoading = true;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.order.id}`;\r\n      this.$http.post(url)\r\n        .then((res) => {\r\n          this.isLoading = false;\r\n          if (res.data.success) {\r\n            this.getOrder();\r\n            const messageTitle = '付款成功';\r\n            this.emitter.emit('push-message', {\r\n              style: 'success',\r\n              title: messageTitle,\r\n              content: '已完成付款',\r\n            });\r\n          }\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    this.getOrder();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./UserCheckout.vue?vue&type=template&id=7666d19e\"\nimport script from \"./UserCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheckout.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["inject","created","this","emitter","emit","fullPath","$route","data","cart","cartLength","cartNum","productClicked","btnLoading","methods","getCart","url","$http","get","then","res","carts","length","addtoCart","item","quantity","find","i","product_id","id","qty","post","title","product","messageTitle","style","content","updateCart","put","class","_createStaticVNode","_createElementVNode","key","_createElementBlock","_Fragment","_createVNode","_component_Loading","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_renderList","order","products","_hoisted_6","_hoisted_7","src","imageUrl","alt","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_toDisplayString","_hoisted_12","_hoisted_13","_ctx","$filters","currency","final_total","couponCode","_hoisted_14","_hoisted_15","_hoisted_16","_createCommentVNode","_hoisted_17","_hoisted_18","_hoisted_19","total","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","user","email","_hoisted_25","name","_hoisted_26","tel","_hoisted_27","address","_hoisted_28","is_paid","_hoisted_30","_hoisted_29","_hoisted_31","_hoisted_32","_hoisted_33","type","onClick","_cache","args","$options","payOrder","_hoisted_34","_hoisted_35","_createBlock","_component_router_link","to","default","_withCtx","_createTextVNode","_","mixins","fullpathMixin","getCartMixin","getOrder","orderId","params","Object","keys","productKey","coupon","code","success","__exports__","render"],"sourceRoot":""}
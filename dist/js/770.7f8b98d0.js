"use strict";(self["webpackChunkfinal_hw"]=self["webpackChunkfinal_hw"]||[]).push([[770],{6453:function(t,e){e.A={inject:["emitter"],created(){this.emitter.emit("get-path",{fullPath:this.$route.fullPath})}}},6770:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var l=s(641),r=s(3751),o=s(33);const n={class:"container"},d={class:"row justify-content-center mb-5"},c={class:"col-12 col-md-8"},a=(0,l.Lk)("h4",{class:"mb-4"},"訂單查詢",-1),i={class:"input-group"},u={key:0,class:"row justify-content-center g-5"},k={class:"col-12 col-xl-5"},L={class:"table align-middle"},p=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{scope:"col"},"品名"),(0,l.Lk)("th",{scope:"col",class:"text-end"},"數量"),(0,l.Lk)("th",{scope:"col",class:"text-end"},"單價")])],-1),h={class:"row flex-column flex-md-row align-items-center"},m={class:"position-relative col w-100 w-xl-50 pt-100 pt-xl-50"},v=["src"],g={class:"col m-0 text-center"},f={class:"text-end"},x={class:"text-end"},b={key:0},y=(0,l.Lk)("td",{colspan:"2",class:"text-end text-success"},"已使用優惠券",-1),w={class:"text-success text-end"},C=(0,l.Lk)("td",{colspan:"2",class:"text-end"},"總計",-1),_={class:"text-end"},E={class:"col-12 col-xl-5"},X={class:"table mb-4"},$=(0,l.Lk)("th",null,"訂單編號",-1),O=(0,l.Lk)("th",null,"Email",-1),I=(0,l.Lk)("th",null,"收件人姓名",-1),j=(0,l.Lk)("th",null,"收件人電話",-1),A=(0,l.Lk)("th",null,"收件人地址",-1),F=(0,l.Lk)("th",null,"付款狀態",-1),Q={key:0,class:"text-danger"},K={key:1,class:"text-success"},N={key:0,class:"row flex-column flex-md-row"},P=(0,l.Lk)("div",{class:"col col-md-7"},[(0,l.Lk)("i",{class:"fa-solid fa-triangle-exclamation me-2"}),(0,l.Lk)("span",{class:"fw-semibold"},"訂單尚未完成!"),(0,l.Lk)("p",null,"確認訂單內容後，點擊付款即完成訂單!")],-1),T={class:"col col-md-5 text-end"},U={key:1},q={class:"h5 text-center text-danger"};function J(t,e,s,J,V,z){const B=(0,l.g2)("Loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(B,{active:V.isLoading},null,8,["active"]),(0,l.Lk)("div",n,[(0,l.Lk)("div",d,[(0,l.Lk)("div",c,[a,(0,l.Lk)("div",i,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",placeholder:"請輸入訂單號碼","onUpdate:modelValue":e[0]||(e[0]=t=>V.orderId=t)},null,512),[[r.Jo,V.orderId]]),(0,l.Lk)("button",{class:"btn btn-secondary",type:"button",onClick:e[1]||(e[1]=(...t)=>z.getOrder&&z.getOrder(...t))}," 查詢 ")])])]),null!==V.order&&V.order.id?((0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("div",k,[(0,l.Lk)("table",L,[p,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(V.order.products,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",h,[(0,l.Lk)("div",m,[(0,l.Lk)("img",{src:e.product.imageUrl,alt:"商品圖片",class:"object-fit-cover position-absolute top-0 bottom-0 start-0 end-0 w-100 h-100"},null,8,v)]),(0,l.Lk)("p",g,(0,o.v_)(e.product.title),1)]),(0,l.Lk)("td",f,(0,o.v_)(e.qty)+"/"+(0,o.v_)(e.product.unit),1),(0,l.Lk)("td",x,"NT$"+(0,o.v_)(t.$filters.currency(e.final_total)),1)])))),128))]),(0,l.Lk)("tfoot",null,[V.couponCode?((0,l.uX)(),(0,l.CE)("tr",b,[y,(0,l.Lk)("td",w,(0,o.v_)(V.couponCode),1)])):(0,l.Q3)("",!0),(0,l.Lk)("tr",null,[C,(0,l.Lk)("td",_,"NT$"+(0,o.v_)(t.$filters.currency(V.order.total)),1)])])])]),(0,l.Lk)("div",E,[(0,l.Lk)("table",X,[(0,l.Lk)("tbody",null,[(0,l.Lk)("tr",null,[$,(0,l.Lk)("td",null,(0,o.v_)(V.order.id),1)]),(0,l.Lk)("tr",null,[O,(0,l.Lk)("td",null,(0,o.v_)(V.order.user.email),1)]),(0,l.Lk)("tr",null,[I,(0,l.Lk)("td",null,(0,o.v_)(V.order.user.name),1)]),(0,l.Lk)("tr",null,[j,(0,l.Lk)("td",null,(0,o.v_)(V.order.user.tel),1)]),(0,l.Lk)("tr",null,[A,(0,l.Lk)("td",null,(0,o.v_)(V.order.user.address),1)]),(0,l.Lk)("tr",null,[F,V.order.is_paid?((0,l.uX)(),(0,l.CE)("td",K,"付款完成")):((0,l.uX)(),(0,l.CE)("td",Q,"尚未付款"))])])]),V.order.is_paid?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",N,[P,(0,l.Lk)("div",T,[(0,l.Lk)("button",{class:"btn btn-danger",type:"button",onClick:e[2]||(e[2]=(...t)=>z.payOrder&&z.payOrder(...t))}," 確認付款 ")])]))])])):V.warning?((0,l.uX)(),(0,l.CE)("div",U,[(0,l.Lk)("p",q,(0,o.v_)(V.warning),1)])):(0,l.Q3)("",!0)])],64)}var V=s(6453),z={data(){return{orderId:"",order:{user:{}},couponCode:"",isLoading:!1,warning:""}},mixins:[V.A],methods:{getOrder(){this.order={},this.isLoading=!0;const t=this.orderId.trim();if(t){const e=`https://vue3-course-api.hexschool.io/api/cms67/order/${t}`;this.$http.get(e).then((t=>{if(this.isLoading=!1,t.data.order){this.order=t.data.order;const e=Object.keys(t.data.order.products)[0],s=t.data.order.products[e];s.coupon&&(this.couponCode=s.coupon.code)}else this.order=t.data.order,this.warning="訂單號碼輸入錯誤，請重新輸入"}))}else this.isLoading=!1,this.warning="訂單號碼不可為空，請輸入訂單號碼"},payOrder(){this.isLoading=!0;const t=this.orderId.trim(),e=`https://vue3-course-api.hexschool.io/api/cms67/pay/${t}`;this.$http.post(e).then((t=>{if(this.isLoading=!1,t.data.success){this.getOrder();const t="付款成功";this.emitter.emit("push-message",{style:"success",title:t,content:"已完成付款"})}}))}}},B=s(6262);const D=(0,B.A)(z,[["render",J]]);var G=D}}]);
//# sourceMappingURL=770.7f8b98d0.js.map
"use strict";(self["webpackChunkfinal_hw"]=self["webpackChunkfinal_hw"]||[]).push([[922],{8038:function(t,e,i){i(4114);e.A={data(){return{favorited:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{setFav(t){if(this.favorited.length){const e=[];this.favorited.forEach((t=>{e.push(t.id)})),e.includes(t.id)?this.favorited.splice(e.indexOf(t.id),1):this.favorited.push(t)}else this.favorited.push(t);localStorage.setItem("favorite",JSON.stringify(this.favorited)),this.emitter.emit("get-like",{favorited:this.favorited})},favState(t){const e=[];return this.favorited.forEach((t=>{e.push(t.id)})),e.includes(t.id)?"fa-solid fa-heart":"fa-regular fa-heart"},created(){this.emitter.emit("get-like",{favorited:this.favorited})}}}},6453:function(t,e){e.A={inject:["emitter"],created(){this.emitter.emit("get-path",{fullPath:this.$route.fullPath})}}},9155:function(t,e){e.A={data(){return{cart:{},cartLength:"",cartNum:"",productClicked:"",btnLoading:""}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/cms67/cart";this.$http.get(t).then((t=>{this.cart=t.data.data,this.cartLength=this.cart.carts.length,this.emitter.emit("get-cart",{cartLength:this.cartLength})}))},addtoCart(t,e=1){this.productClicked=this.cart.carts.find((e=>e.product_id===t.id)),this.btnLoading=t.id;const i="https://vue3-course-api.hexschool.io/api/cms67/cart",s={product_id:t.id,qty:e};this.$http.post(i,{data:s}).then((t=>{const{title:e}=t.data.data.product;if(this.btnLoading="",this.getCart(),t.data.data.qty>20){const t="已加入到最大數量";this.emitter.emit("push-message",{style:"warning",title:t,content:`購物車內目前已有20件${e}`}),this.updateCart()}else{const t="加入成功";this.emitter.emit("push-message",{style:"success",title:t,content:`已將${e}加入購物車`})}}))},updateCart(){const t=`https://vue3-course-api.hexschool.io/api/cms67/cart/${this.productClicked.id}`,e={product_id:this.productClicked.product_id,qty:20};this.$http.put(t,{data:e}).then((()=>{this.getCart()}))}},created(){this.getCart()}}},8922:function(t,e,i){i.r(e),i.d(e,{default:function(){return R}});var s=i(641),a=i(33),o=i(3751);const c={class:"container cart"},l={key:0,class:"row justify-content-center"},r={class:"col-12 col-md-8"},n=(0,s.Lk)("h4",{class:"mb-5"},"我的收藏",-1),d={class:"clearfix mx-2"},u={class:"col-4 col-md-3"},h={class:"product-img"},p=["src","onClick"],f={key:0,class:"sale badge bg-pink position-absolute text-white top-0 end-0 rounded-0 fs-6"},m={class:"delete-icon"},g=["onClick"],k=(0,s.Lk)("i",{class:"fa-solid fa-xmark text-gray fs-3"},null,-1),v=[k],b={class:"col-6 col-md-9 product-content"},L={class:"row flex-column flex-md-row list-unstyled align-items-center gy-2"},y={class:"col col-md-4 col-xl-6 product-title"},C={class:"mb-0 fs-6 fw-semibold"},x={class:"d-none d-xl-flex fs-14"},w={class:"col col-md-3 col-xl-2 list-unstyled d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between"},_={class:"product-price"},E={key:0,class:"fw-semibold mb-0 text-pink"},$={key:1,class:"fw-semibold mb-0 text-pink"},S={key:2},X={class:"col col-md-5 col-xl-4"},F=["onClick","disabled"],N={key:0,class:"spinner-border spinner-border-sm",role:"status"},A=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),j=[A],O={key:1,class:"fa-solid fa-cart-shopping me-1"},P={class:"row justify-content-between mb-2"},I={class:"col"},J={key:1,class:"row justify-content-center"},q={class:"col-12 col-md-8 col-xl-7"},T=(0,s.Lk)("h4",{class:"mb-5"},"我的收藏",-1),K={class:"text-center p-5"},Q=(0,s.Lk)("i",{class:"fa-solid fa-heart text-gray mb-5 d-block",style:{"font-size":"120px"}},null,-1),W=(0,s.Lk)("h5",{class:"mb-3"},"我的收藏目前沒有商品",-1);function z(t,e,i,k,A,z){const D=(0,s.g2)("Loading"),U=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(D,{active:A.isLoading},null,8,["active"]),(0,s.Lk)("div",c,[t.favorited.length?((0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",r,[n,(0,s.Lk)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.favorited,(e=>((0,s.uX)(),(0,s.CE)("ul",{key:e.id,class:"row bg-white list-unstyled align-items-center py-3 position-relative"},[(0,s.Lk)("li",u,[(0,s.Lk)("div",h,[(0,s.Lk)("img",{src:e.imageUrl,alt:"商品圖片",class:"object-fit-cover",onClick:t=>z.getProduct(e.id)},null,8,p),e.origin_price!=e.price?((0,s.uX)(),(0,s.CE)("span",f," sale ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",m,[(0,s.Lk)("button",{class:"btn",type:"button",onClick:t=>z.delFav(e)},v,8,g)])]),(0,s.Lk)("li",b,[(0,s.Lk)("ul",L,[(0,s.Lk)("li",y,[(0,s.Lk)("p",C,(0,a.v_)(e.title),1),(0,s.Lk)("p",x,(0,a.v_)(e.description),1)]),(0,s.Lk)("ul",w,[(0,s.Lk)("li",_,[e.price?((0,s.uX)(),(0,s.CE)("p",E," NT$"+(0,a.v_)(e.price),1)):((0,s.uX)(),(0,s.CE)("p",$," NT$"+(0,a.v_)(e.origin_price),1)),e.origin_price!=e.price?((0,s.uX)(),(0,s.CE)("del",S," NT$"+(0,a.v_)(e.origin_price),1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("li",X,[(0,s.Lk)("button",{class:"btn btn-sm btn-info w-100 rounded-0 py-1",onClick:(0,o.D$)((i=>t.addtoCart(e)),["stop"]),type:"button",disabled:e.id===this.btnLoading},[e.id===this.btnLoading?((0,s.uX)(),(0,s.CE)("div",N,j)):((0,s.uX)(),(0,s.CE)("i",O)),(0,s.eW)(" 加入購物車 ")],8,F)])])])])))),128))]),(0,s.Lk)("div",P,[(0,s.Lk)("div",I,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-gray",type:"button",onClick:e[0]||(e[0]=(...t)=>z.clearFav&&z.clearFav(...t))}," 清空收藏 ")])])])])):((0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",q,[T,(0,s.Lk)("div",K,[Q,W,(0,s.bF)(U,{to:"/productsList",class:"fw-semibold text-pink"},{default:(0,s.k6)((()=>[(0,s.eW)(" 繼續挑選 ")])),_:1})])])]))])],64)}i(4114);var D=i(6453),U=i(9155),B=i(8038),G={data(){return{isLoading:!1,products:{},totalPages:"",curentPageSum:1,pageSum:1}},mixins:[D.A,U.A,B.A],methods:{delFav(t){const e=[];this.favorited.forEach((t=>{e.push(t.id)})),this.favorited.splice(e.indexOf(t.id),1),localStorage.setItem("favorite",JSON.stringify(this.favorited)),this.emitter.emit("get-like",{favorited:this.favorited});const i="已移除收藏";this.emitter.emit("push-message",{style:"danger",title:i,content:`已將${t.title}移除收藏`})},clearFav(){this.favorited=[],localStorage.setItem("favorite",JSON.stringify(this.favorited)),this.emitter.emit("get-like",{favorited:this.favorited});const t="已移除收藏";this.emitter.emit("push-message",{style:"danger",title:t,content:"已將全部商品移除收藏"})},getProduct(t){this.$router.push(`/product/${t}`)}}},H=i(6262);const M=(0,H.A)(G,[["render",z]]);var R=M}}]);
//# sourceMappingURL=922.2a535d36.js.map